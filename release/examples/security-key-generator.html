<!DOCTYPE html>
<html>
<head>
    <title>Security Key Generator</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .key-box { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; word-break: break-all; }
        button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #005a87; }
        .warning { background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 20px 0; }
        .success { background: #d4edda; padding: 15px; border-left: 4px solid #28a745; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>üîê Lucrum POS Security Key Generator</h1>
    
    <div class="warning">
        <strong>‚ö†Ô∏è IMPORTANT:</strong> 
        <ul>
            <li>Generate new keys for each installation</li>
            <li>Keep these keys secure and private</li>
            <li>Never share them in emails or unsecured channels</li>
            <li>Save them in a password manager</li>
        </ul>
    </div>

    <h2>1. JWT Secret Key</h2>
    <p>Used for authentication tokens. Must be at least 32 characters.</p>
    <button onclick="generateJWT()">Generate JWT Secret</button>
    <div class="key-box" id="jwtKey">Click "Generate JWT Secret" to create a key</div>

    <h2>2. Admin API Key</h2>
    <p>Used for API authentication. Should be unique and memorable.</p>
    <button onclick="generateAPI()">Generate API Key</button>
    <div class="key-box" id="apiKey">Click "Generate API Key" to create a key</div>

    <h2>3. Copy to .env file</h2>
    <button onclick="generateEnvFormat()">Generate .env Format</button>
    <div class="key-box" id="envFormat">Click "Generate .env Format" to see the formatted keys</div>

    <div class="success">
        <strong>‚úÖ Next Steps:</strong>
        <ol>
            <li>Copy the generated keys above</li>
            <li>Open your <code>.env</code> file</li>
            <li>Replace the default values with your generated keys</li>
            <li>Save the file securely</li>
        </ol>
    </div>

    <script>
        function generateRandomString(length, includeSymbols = true) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
            const allChars = includeSymbols ? chars + symbols : chars;
            let result = '';
            for (let i = 0; i < length; i++) {
                result += allChars.charAt(Math.floor(Math.random() * allChars.length));
            }
            return result;
        }

        function generateJWT() {
            const jwtSecret = generateRandomString(64, true);
            document.getElementById('jwtKey').textContent = jwtSecret;
        }

        function generateAPI() {
            const timestamp = new Date().getFullYear();
            const randomPart = generateRandomString(24, false);
            const apiKey = `lucrum_api_${timestamp}_${randomPart}`;
            document.getElementById('apiKey').textContent = apiKey;
        }

        function generateEnvFormat() {
            const jwtKey = document.getElementById('jwtKey').textContent;
            const apiKey = document.getElementById('apiKey').textContent;
            
            if (jwtKey === "Click \"Generate JWT Secret\" to create a key" || 
                apiKey === "Click \"Generate API Key\" to create a key") {
                alert("Please generate both keys first!");
                return;
            }

            const envFormat = `# Security Configuration - PRODUCTION KEYS
JWT_SECRET=${jwtKey}
ADMIN_API_KEY=${apiKey}

# Copy these lines and replace the values in your .env file`;
            
            document.getElementById('envFormat').textContent = envFormat;
        }

        // Auto-generate keys when page loads
        window.onload = function() {
            generateJWT();
            generateAPI();
        }
    </script>
</body>
</html>